\doxysection{C:\+/\+\+Users/\+\+Sterm/\+\+Documents/\+\+Git\+Hub/\+\+Rover\+\_\+gruppo3/\+\+Codice\+\_\+\+Rover/\+\+Progetto\+\_\+\+Board1/\+\+Core/\+\+Src/\+actuation/\+sabertooth\+\_\+driver.c File Reference}
\hypertarget{sabertooth__driver_8c}{}\label{sabertooth__driver_8c}\index{C:/Users/Sterm/Documents/GitHub/Rover\_gruppo3/Codice\_Rover/Progetto\_Board1/Core/Src/actuation/sabertooth\_driver.c@{C:/Users/Sterm/Documents/GitHub/Rover\_gruppo3/Codice\_Rover/Progetto\_Board1/Core/Src/actuation/sabertooth\_driver.c}}


Driver per la gestione dei motori tramite controller Sabertooth in modalità seriale a pacchetti.  


{\ttfamily \+\#include "{}actuation/\+sabertooth\+\_\+driver.\+h"{}}\newline
{\ttfamily \+\#include "{}stm32g4xx\+\_\+hal.\+h"{}}\newline
{\ttfamily \+\#include $<$math.\+h$>$}\newline
{\ttfamily \+\#include "{}cmsis\+\_\+os.\+h"{}}\newline
Include dependency graph for sabertooth\+\_\+driver.\+c:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_acf2b24254cfdce0e26a24920f54b41ad}{SABER\+\_\+\+PACKET\+\_\+\+LEN}}~4U
\begin{DoxyCompactList}\small\item\em Lunghezza di un pacchetto Sabertooth \+[byte]\+. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_ac6c8210bc1cf6036df54e7a76679d943}{SABER\+\_\+\+TX\+\_\+\+BUFFER\+\_\+\+LEN}}~(4U \texorpdfstring{$\ast$}{*} \doxymbox{\hyperlink{sabertooth__driver_8c_acf2b24254cfdce0e26a24920f54b41ad}{SABER\+\_\+\+PACKET\+\_\+\+LEN}})
\begin{DoxyCompactList}\small\item\em Dimensione del buffer TX \+[byte]\+. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_a735d4a10df759940a2c9cf8e5ff5a63f}{SABER\+\_\+\+INIT\+\_\+\+DELAY\+\_\+\+MS}}~1000U
\begin{DoxyCompactList}\small\item\em Delay iniziale per permettere il boot dei driver \+[ms]\+. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_aecb5cb5bc03f73cc84bbe871769656f4}{SABER\+\_\+\+INIT\+\_\+\+CMD\+\_\+\+TIMEOUT}}~14U
\begin{DoxyCompactList}\small\item\em Comando seriale per configurare il timeout Sabertooth. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_afa66a9970a83e7e250714624d5516f51}{SABER\+\_\+\+INIT\+\_\+\+TIMEOUT\+\_\+\+VALUE}}~3.\+0f
\begin{DoxyCompactList}\small\item\em Valore timeout in step da 100 ms. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_a61be383c7f5739ebd76f8788501cb78d}{SABER\+\_\+\+REF\+\_\+\+VOLTAGE}}~12.\+0f
\begin{DoxyCompactList}\small\item\em Riferimento tensione per scalatura \+[V]\+. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_a64e8941f89f6d4eafaf3c1c933c77834}{SABER\+\_\+\+COMMAND\+\_\+\+SCALE}}~127.\+0f
\begin{DoxyCompactList}\small\item\em Massima ampiezza comando Sabertooth. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_a706661a76d919f43a829055d16116755}{SABER\+\_\+\+CMD\+\_\+\+M1\+\_\+\+FWD}}~0U
\begin{DoxyCompactList}\small\item\em Comando Sabertooth:\+ motore 1 avanti. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_ac67c06ab8e7a3c349b7fc145952fcd8f}{SABER\+\_\+\+CMD\+\_\+\+M1\+\_\+\+REV}}~1U
\begin{DoxyCompactList}\small\item\em Comando Sabertooth:\+ motore 1 indietro. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_a7c810a9b4d85c2c9f9f9115c6d25d8c6}{SABER\+\_\+\+CMD\+\_\+\+M2\+\_\+\+FWD}}~4U
\begin{DoxyCompactList}\small\item\em Comando Sabertooth:\+ motore 2 avanti. \end{DoxyCompactList}\item 
\+\#define \doxymbox{\hyperlink{sabertooth__driver_8c_ae1c1bb7025a775852d11b5f6832a8bfc}{SABER\+\_\+\+CMD\+\_\+\+M2\+\_\+\+REV}}~5U
\begin{DoxyCompactList}\small\item\em Comando Sabertooth:\+ motore 2 indietro. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static uint8\+\_\+t \doxymbox{\hyperlink{sabertooth__driver_8c_afe3092cef7667a37789c3d6a189336e2}{Saber\+\_\+\+Checksum}} (uint8\+\_\+t a, uint8\+\_\+t b, uint8\+\_\+t c)
\begin{DoxyCompactList}\small\item\em Calcola il checksum a 7-\/bit richiesto dal protocollo Sabertooth. \end{DoxyCompactList}\item 
static void \doxymbox{\hyperlink{sabertooth__driver_8c_aff60a261fda72eadf539c1a86a000313}{Prepare\+\_\+\+Saber\+\_\+\+Packet}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}dest, uint8\+\_\+t addr, uint8\+\_\+t cmd, float value)
\begin{DoxyCompactList}\small\item\em Prepara un singolo pacchetto da 4 byte per il protocollo Sabertooth. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{sabertooth__driver_8c_ad8e3995889ea345e17e66905d67d0703}{Sabertooth\+\_\+\+Init}} (void)
\begin{DoxyCompactList}\small\item\em Inizializza i driver Sabertooth. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{sabertooth__driver_8c_a9611fcff8d2ff2c3ca24725024f02647}{Sabertooth\+\_\+\+Apply\+Outputs}} (float usx\+\_\+a, float udx\+\_\+a, float usx\+\_\+p, float udx\+\_\+p)
\begin{DoxyCompactList}\small\item\em Converte le tensioni di comando in pacchetti seriali e avvia la trasmissione. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{sabertooth__driver_8c_aaef7a985f0971dfd3c0cf707928b6e12}{Sabertooth\+Callback}} (void)
\begin{DoxyCompactList}\small\item\em Callback di completamento trasmissione UART. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
UART\+\_\+\+Handle\+Type\+Def \doxymbox{\hyperlink{sabertooth__driver_8c_a25a82fcf0cd24eb6d39977cb5864cec8}{huart5}}
\begin{DoxyCompactList}\small\item\em Handle della periferica UART utilizzata per la comunicazione con i driver. \end{DoxyCompactList}\item 
static uint8\+\_\+t \doxymbox{\hyperlink{sabertooth__driver_8c_ace0062343883020a5178615b5bc4b069}{saber\+\_\+tx}} \+[\doxymbox{\hyperlink{sabertooth__driver_8c_ac6c8210bc1cf6036df54e7a76679d943}{SABER\+\_\+\+TX\+\_\+\+BUFFER\+\_\+\+LEN}}]\+
\begin{DoxyCompactList}\small\item\em Buffer di trasmissione per i pacchetti seriali (4 pacchetti da 4 byte ciascuno). \end{DoxyCompactList}\item 
static volatile uint8\+\_\+t \doxymbox{\hyperlink{sabertooth__driver_8c_a56f2dec68ade5f3cf7ec7700b3e1fc45}{tx\+\_\+busy}} = 0U
\begin{DoxyCompactList}\small\item\em Flag di stato per indicare se una trasmissione DMA/\+\+Interrupt è in corso. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Driver per la gestione dei motori tramite controller Sabertooth in modalità seriale a pacchetti. 



\label{doc-define-members}
\Hypertarget{sabertooth__driver_8c_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{sabertooth__driver_8c_a706661a76d919f43a829055d16116755}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_CMD\_M1\_FWD@{SABER\_CMD\_M1\_FWD}}
\index{SABER\_CMD\_M1\_FWD@{SABER\_CMD\_M1\_FWD}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_CMD\_M1\_FWD}{SABER\_CMD\_M1\_FWD}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a706661a76d919f43a829055d16116755} 
\+\#define SABER\+\_\+\+CMD\+\_\+\+M1\+\_\+\+FWD~0U}



Comando Sabertooth:\+ motore 1 avanti. 

\Hypertarget{sabertooth__driver_8c_ac67c06ab8e7a3c349b7fc145952fcd8f}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_CMD\_M1\_REV@{SABER\_CMD\_M1\_REV}}
\index{SABER\_CMD\_M1\_REV@{SABER\_CMD\_M1\_REV}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_CMD\_M1\_REV}{SABER\_CMD\_M1\_REV}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_ac67c06ab8e7a3c349b7fc145952fcd8f} 
\+\#define SABER\+\_\+\+CMD\+\_\+\+M1\+\_\+\+REV~1U}



Comando Sabertooth:\+ motore 1 indietro. 

\Hypertarget{sabertooth__driver_8c_a7c810a9b4d85c2c9f9f9115c6d25d8c6}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_CMD\_M2\_FWD@{SABER\_CMD\_M2\_FWD}}
\index{SABER\_CMD\_M2\_FWD@{SABER\_CMD\_M2\_FWD}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_CMD\_M2\_FWD}{SABER\_CMD\_M2\_FWD}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a7c810a9b4d85c2c9f9f9115c6d25d8c6} 
\+\#define SABER\+\_\+\+CMD\+\_\+\+M2\+\_\+\+FWD~4U}



Comando Sabertooth:\+ motore 2 avanti. 

\Hypertarget{sabertooth__driver_8c_ae1c1bb7025a775852d11b5f6832a8bfc}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_CMD\_M2\_REV@{SABER\_CMD\_M2\_REV}}
\index{SABER\_CMD\_M2\_REV@{SABER\_CMD\_M2\_REV}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_CMD\_M2\_REV}{SABER\_CMD\_M2\_REV}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_ae1c1bb7025a775852d11b5f6832a8bfc} 
\+\#define SABER\+\_\+\+CMD\+\_\+\+M2\+\_\+\+REV~5U}



Comando Sabertooth:\+ motore 2 indietro. 

\Hypertarget{sabertooth__driver_8c_a64e8941f89f6d4eafaf3c1c933c77834}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_COMMAND\_SCALE@{SABER\_COMMAND\_SCALE}}
\index{SABER\_COMMAND\_SCALE@{SABER\_COMMAND\_SCALE}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_COMMAND\_SCALE}{SABER\_COMMAND\_SCALE}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a64e8941f89f6d4eafaf3c1c933c77834} 
\+\#define SABER\+\_\+\+COMMAND\+\_\+\+SCALE~127.\+0f}



Massima ampiezza comando Sabertooth. 

\Hypertarget{sabertooth__driver_8c_aecb5cb5bc03f73cc84bbe871769656f4}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_INIT\_CMD\_TIMEOUT@{SABER\_INIT\_CMD\_TIMEOUT}}
\index{SABER\_INIT\_CMD\_TIMEOUT@{SABER\_INIT\_CMD\_TIMEOUT}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_INIT\_CMD\_TIMEOUT}{SABER\_INIT\_CMD\_TIMEOUT}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_aecb5cb5bc03f73cc84bbe871769656f4} 
\+\#define SABER\+\_\+\+INIT\+\_\+\+CMD\+\_\+\+TIMEOUT~14U}



Comando seriale per configurare il timeout Sabertooth. 

\Hypertarget{sabertooth__driver_8c_a735d4a10df759940a2c9cf8e5ff5a63f}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_INIT\_DELAY\_MS@{SABER\_INIT\_DELAY\_MS}}
\index{SABER\_INIT\_DELAY\_MS@{SABER\_INIT\_DELAY\_MS}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_INIT\_DELAY\_MS}{SABER\_INIT\_DELAY\_MS}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a735d4a10df759940a2c9cf8e5ff5a63f} 
\+\#define SABER\+\_\+\+INIT\+\_\+\+DELAY\+\_\+\+MS~1000U}



Delay iniziale per permettere il boot dei driver \+[ms]\+. 

\Hypertarget{sabertooth__driver_8c_afa66a9970a83e7e250714624d5516f51}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_INIT\_TIMEOUT\_VALUE@{SABER\_INIT\_TIMEOUT\_VALUE}}
\index{SABER\_INIT\_TIMEOUT\_VALUE@{SABER\_INIT\_TIMEOUT\_VALUE}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_INIT\_TIMEOUT\_VALUE}{SABER\_INIT\_TIMEOUT\_VALUE}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_afa66a9970a83e7e250714624d5516f51} 
\+\#define SABER\+\_\+\+INIT\+\_\+\+TIMEOUT\+\_\+\+VALUE~3.\+0f}



Valore timeout in step da 100 ms. 

\Hypertarget{sabertooth__driver_8c_acf2b24254cfdce0e26a24920f54b41ad}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_PACKET\_LEN@{SABER\_PACKET\_LEN}}
\index{SABER\_PACKET\_LEN@{SABER\_PACKET\_LEN}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_PACKET\_LEN}{SABER\_PACKET\_LEN}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_acf2b24254cfdce0e26a24920f54b41ad} 
\+\#define SABER\+\_\+\+PACKET\+\_\+\+LEN~4U}



Lunghezza di un pacchetto Sabertooth \+[byte]\+. 

\Hypertarget{sabertooth__driver_8c_a61be383c7f5739ebd76f8788501cb78d}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_REF\_VOLTAGE@{SABER\_REF\_VOLTAGE}}
\index{SABER\_REF\_VOLTAGE@{SABER\_REF\_VOLTAGE}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_REF\_VOLTAGE}{SABER\_REF\_VOLTAGE}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a61be383c7f5739ebd76f8788501cb78d} 
\+\#define SABER\+\_\+\+REF\+\_\+\+VOLTAGE~12.\+0f}



Riferimento tensione per scalatura \+[V]\+. 

\Hypertarget{sabertooth__driver_8c_ac6c8210bc1cf6036df54e7a76679d943}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SABER\_TX\_BUFFER\_LEN@{SABER\_TX\_BUFFER\_LEN}}
\index{SABER\_TX\_BUFFER\_LEN@{SABER\_TX\_BUFFER\_LEN}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SABER\_TX\_BUFFER\_LEN}{SABER\_TX\_BUFFER\_LEN}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_ac6c8210bc1cf6036df54e7a76679d943} 
\+\#define SABER\+\_\+\+TX\+\_\+\+BUFFER\+\_\+\+LEN~(4U \texorpdfstring{$\ast$}{*} \doxymbox{\hyperlink{sabertooth__driver_8c_acf2b24254cfdce0e26a24920f54b41ad}{SABER\+\_\+\+PACKET\+\_\+\+LEN}})}



Dimensione del buffer TX \+[byte]\+. 



\label{doc-func-members}
\Hypertarget{sabertooth__driver_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{sabertooth__driver_8c_aff60a261fda72eadf539c1a86a000313}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!Prepare\_Saber\_Packet@{Prepare\_Saber\_Packet}}
\index{Prepare\_Saber\_Packet@{Prepare\_Saber\_Packet}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{Prepare\_Saber\_Packet()}{Prepare\_Saber\_Packet()}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_aff60a261fda72eadf539c1a86a000313} 
void Prepare\+\_\+\+Saber\+\_\+\+Packet (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{dest}{, }\item[{uint8\+\_\+t}]{addr}{, }\item[{uint8\+\_\+t}]{cmd}{, }\item[{float}]{value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Prepara un singolo pacchetto da 4 byte per il protocollo Sabertooth. 

Gestisce il clipping del valore di velocità e il calcolo del checksum. 
\begin{DoxyParams}{Parameters}
{\em dest} & Puntatore all\textquotesingle{}array di destinazione (almeno 4 byte). \\
\hline
{\em addr} & Indirizzo del driver Sabertooth. \\
\hline
{\em cmd} & Comando da inviare (direzione/\+canale). \\
\hline
{\em value} & Valore di velocità floating point da convertire in intero. \\
\hline
\end{DoxyParams}
Here is the call graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=327pt]{sabertooth__driver_8c_aff60a261fda72eadf539c1a86a000313_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c_aff60a261fda72eadf539c1a86a000313_icgraph}
\end{center}
\end{figure}
\Hypertarget{sabertooth__driver_8c_afe3092cef7667a37789c3d6a189336e2}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!Saber\_Checksum@{Saber\_Checksum}}
\index{Saber\_Checksum@{Saber\_Checksum}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{Saber\_Checksum()}{Saber\_Checksum()}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_afe3092cef7667a37789c3d6a189336e2} 
uint8\+\_\+t Saber\+\_\+\+Checksum (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a}{, }\item[{uint8\+\_\+t}]{b}{, }\item[{uint8\+\_\+t}]{c}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Calcola il checksum a 7-\/bit richiesto dal protocollo Sabertooth. 


\begin{DoxyParams}{Parameters}
{\em a} & Indirizzo del dispositivo. \\
\hline
{\em b} & Numero del comando. \\
\hline
{\em c} & Valore del dato (velocità). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint8\+\_\+t Il checksum calcolato (somma dei byte mascherata a 0x7F). 
\end{DoxyReturn}
Here is the caller graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c_afe3092cef7667a37789c3d6a189336e2_icgraph}
\end{center}
\end{figure}
\Hypertarget{sabertooth__driver_8c_a9611fcff8d2ff2c3ca24725024f02647}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!Sabertooth\_ApplyOutputs@{Sabertooth\_ApplyOutputs}}
\index{Sabertooth\_ApplyOutputs@{Sabertooth\_ApplyOutputs}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{Sabertooth\_ApplyOutputs()}{Sabertooth\_ApplyOutputs()}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a9611fcff8d2ff2c3ca24725024f02647} 
void Sabertooth\+\_\+\+Apply\+Outputs (\begin{DoxyParamCaption}\item[{float}]{usx\+\_\+a}{, }\item[{float}]{udx\+\_\+a}{, }\item[{float}]{usx\+\_\+p}{, }\item[{float}]{udx\+\_\+p}{}\end{DoxyParamCaption})}



Converte le tensioni di comando in pacchetti seriali e avvia la trasmissione. 

Invia i comandi di velocità ai 4 motori.

La funzione scala i valori di tensione (0-\/12V) nel range Sabertooth (0-\/127). Se una trasmissione è già in corso, la chiamata viene ignorata per non corrompere il buffer. 
\begin{DoxyParams}{Parameters}
{\em usx\+\_\+a} & Tensione motore Anteriore Sinistro. \\
\hline
{\em udx\+\_\+a} & Tensione motore Anteriore Destro. \\
\hline
{\em usx\+\_\+p} & Tensione motore Posteriore Sinistro. \\
\hline
{\em udx\+\_\+p} & Tensione motore Posteriore Destro. \\
\hline
\end{DoxyParams}
Here is the call graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c_a9611fcff8d2ff2c3ca24725024f02647_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c_a9611fcff8d2ff2c3ca24725024f02647_icgraph}
\end{center}
\end{figure}
\Hypertarget{sabertooth__driver_8c_ad8e3995889ea345e17e66905d67d0703}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!Sabertooth\_Init@{Sabertooth\_Init}}
\index{Sabertooth\_Init@{Sabertooth\_Init}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{Sabertooth\_Init()}{Sabertooth\_Init()}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_ad8e3995889ea345e17e66905d67d0703} 
void Sabertooth\+\_\+\+Init (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Inizializza i driver Sabertooth. 

Inizializza la periferica di comunicazione per i controller Sabertooth.

Introduce un ritardo di avvio e configura i parametri di timeout iniziali per i driver anteriori e posteriori. Here is the call graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c_ad8e3995889ea345e17e66905d67d0703_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c_ad8e3995889ea345e17e66905d67d0703_icgraph}
\end{center}
\end{figure}
\Hypertarget{sabertooth__driver_8c_aaef7a985f0971dfd3c0cf707928b6e12}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!SabertoothCallback@{SabertoothCallback}}
\index{SabertoothCallback@{SabertoothCallback}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{SabertoothCallback()}{SabertoothCallback()}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_aaef7a985f0971dfd3c0cf707928b6e12} 
void Sabertooth\+Callback (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Callback di completamento trasmissione UART. 

Callback per la gestione degli eventi legati alla comunicazione Sabertooth.

Deve essere chiamata dall\textquotesingle{}ISR dell\textquotesingle{}UART (HAL\+\_\+\+UART\+\_\+\+Tx\+Cplt\+Callback) per sbloccare il driver e permettere nuovi invii. Here is the caller graph for this function:\+
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sabertooth__driver_8c_aaef7a985f0971dfd3c0cf707928b6e12_icgraph}
\end{center}
\end{figure}


\label{doc-var-members}
\Hypertarget{sabertooth__driver_8c_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{sabertooth__driver_8c_a25a82fcf0cd24eb6d39977cb5864cec8}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!huart5@{huart5}}
\index{huart5@{huart5}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{huart5}{huart5}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a25a82fcf0cd24eb6d39977cb5864cec8} 
UART\+\_\+\+Handle\+Type\+Def huart5\hspace{0.3cm}{\ttfamily [extern]}}



Handle della periferica UART utilizzata per la comunicazione con i driver. 

\Hypertarget{sabertooth__driver_8c_ace0062343883020a5178615b5bc4b069}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!saber\_tx@{saber\_tx}}
\index{saber\_tx@{saber\_tx}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{saber\_tx}{saber\_tx}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_ace0062343883020a5178615b5bc4b069} 
uint8\+\_\+t saber\+\_\+tx\+[\doxymbox{\hyperlink{sabertooth__driver_8c_ac6c8210bc1cf6036df54e7a76679d943}{SABER\+\_\+\+TX\+\_\+\+BUFFER\+\_\+\+LEN}}]\+\hspace{0.3cm}{\ttfamily [static]}}



Buffer di trasmissione per i pacchetti seriali (4 pacchetti da 4 byte ciascuno). 

\Hypertarget{sabertooth__driver_8c_a56f2dec68ade5f3cf7ec7700b3e1fc45}\index{sabertooth\_driver.c@{sabertooth\_driver.c}!tx\_busy@{tx\_busy}}
\index{tx\_busy@{tx\_busy}!sabertooth\_driver.c@{sabertooth\_driver.c}}
\doxysubsubsection{\texorpdfstring{tx\_busy}{tx\_busy}}
{\footnotesize\ttfamily \label{sabertooth__driver_8c_a56f2dec68ade5f3cf7ec7700b3e1fc45} 
volatile uint8\+\_\+t tx\+\_\+busy = 0U\hspace{0.3cm}{\ttfamily [static]}}



Flag di stato per indicare se una trasmissione DMA/\+\+Interrupt è in corso. 

