/*
 * board_health_snapshot.h
 *
 *  Created on: Jan 8, 2026
 *      Author: Sterm
 */

#ifndef INC_SNAPSHOT_BOARD_HEALTH_SNAPSHOT_H_
#define INC_SNAPSHOT_BOARD_HEALTH_SNAPSHOT_H_

#include <stdint.h>

/* Validity mask bits */
#define BOARD_HEALTH_VALID_TEMP   (1U << 0)
#define BOARD_HEALTH_VALID_BATT   (1U << 1)

typedef struct
{
  float temperature_degC;
  float battery_pct;

  uint32_t task_last_run_ms;     /* ultima esecuzione del task */

  uint32_t temp_last_valid_ms;
  uint32_t batt_last_valid_ms;
} BoardHealthSnapshot_t;


static void BoardHealthSnapshot_MutexInit(void);

/* Writer API (called by BoardHealth task only) */
void BoardHealthSnapshot_Write(const BoardHealthSnapshot_t *src);

/* Reader API (called by supervisor or others) */
void BoardHealthSnapshot_Read(BoardHealthSnapshot_t *dst);


#endif /* INC_SNAPSHOT_BOARD_HEALTH_SNAPSHOT_H_ */
